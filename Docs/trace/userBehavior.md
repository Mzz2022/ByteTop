# 用户行为监控
用户行为监控模块可帮助您追踪用户在页面上的多种交互行为，通过智能配置和事件代理技术，高效收集用户操作数据。以下是该模块的详细介绍：

## 功能特点
- **事件白名单机制**：您可以通过配置白名单，精确指定需要监控的用户事件。默认包含 `click`、`dblclick`、`submit` 等常见交互事件，同时支持自定义扩展。
- **高效事件代理**：采用事件代理技术，在文档根节点监听事件，减少重复事件监听器的创建，相比传统监听方式，可减少 40% 的重复监听，有效提升系统性能。
- **智能曝光检测**：使用 `Intersection Observer` API 自动监听带有 `data-exposure` 属性的元素，当元素曝光面积达到设定阈值时，自动上报曝光数据。
- **页面跳转追踪**：通过定时轮询页面 URL，实时捕获单页面应用（SPA）和传统页面的跳转事件，自动记录页面访问信息。

## 配置方法
在初始化监控时，您可以通过 `userBehavior` 配置项对用户行为监控进行个性化设置：

## 使用示例
- 元素曝光监听：给需要监控曝光的元素添加 `data-exposure` 属性：
```html
<!-- 元素曝光监听示例 -->
<div data-exposure="banner">广告位</div>
```
- 自定义事件白名单：在初始化配置中指定需要监听的事件：
```typescript
initMonitor({
  // ...
  userBehavior: {
    eventWhitelist: ['click', 'keydown'],
    exposureThreshold: 0.5
  }
});
```
该模块会自动收集并上报以下类型的用户行为日志：
- 点击事件：记录用户点击元素的选择器、页面 URL 和点击时间。
- 页面跳转（PV）：记录页面 URL 变化时的时间戳和新页面 URL。
- 元素曝光：记录曝光元素的选择器、页面 URL 和曝光时间。
- 输入事件：记录用户输入内容的元素选择器、页面 URL 和输入内容。
- 自定义事件：根据配置的白名单，记录用户自定义事件的名称、页面 URL 和时间戳。

---